# زیرساخت با کد چیست؟
## نگاه اجمالی
زیرساخت با کد[^1] 
(IaC) 
مدیریت و ارائه زیرساخت از طریق کد به جای فرآیندهای دستی است.

با استفاده از 
IaC، 
فایل‌های پیکربندی[^2]
ایجاد می‌شوند که شامل مشخصات زیرساخت شما هستند، که این امر نیز ویرایش و توزیع پیکربندی را آسان‌تر می‌کند.
همچنین این اطمینان را به شما می‌دهد که هر بار محیط مشابهی را فراهم می‌کنید. با رمزگذاری و مستندسازی مشخصات پیکربندی خود با استفاده از
IaC 
به شما کمک می‌کند تا از تغییرات پیکربندی ناشناخته و بدون مستندسازی جلوگیری کنید.

کنترل نسخه[^3]
بخش مهمی از 
IaC 
است و فایل‌های پیکربندی شما باید تحت کنترل نسخه‌هایی مانند
Git
باشند.
استقرار زیرساخت خود را به عنوان کد همچنین به این معناست که 
می‌توانید زیرساخت خود را به اجزای مدولار تقسیم کنید که بعداً از طریق خودکارسازی به روش‌های مختلف ترکیب شوند.

اتوماسیون ارائه زیرساخت با 
IaC 
به معنای عدم نیاز توسعه‌دهندگان به ارائه و مدیریت دستی سرورها، سیستم‌عامل‌ها، ذخیره‌سازی و دیگر اجزای زیرساخت هر باری که یک برنامه توسعه یا استقرار می‌دهند است.
Ansible
یکی از معروف‌ترین و پرکاربرد ابزارهای
IaC
است که توسط شرکت
Red Hat
توسعه داده شده که حتما با آن آشنایی دارید.

[^1]: Infrastructure as Code
[^2]: Configuration Files
[^3]: Version Control

## رویکردهای اعلامی و دستوری
دو رویکرد
اعلامی[^4]
و
دستوری[^5]
در ابزارهای
IaC
وجود دارد.

رویکرد اعلامی زیرساخت مورد نظر را توصیف می‌کند و ابزارهای
IaC
به طور خودکار تغییرات لازم را برای رسیدن به حالت مورد نظر اعمال می‌کنند.

رویکرد دستوری به طور صریح دستوراتی که باید اجرا شود را توصیف می‌کند و ابزارهای
IaC
دستورهای وارد شده را اجرا می‌کنند.

ابزارهای معروف
IaC
معمولا هر دو رویکرد را پشتیبانی می‌کنند ولی
یکی را بر دیگری ترجیح می‌دهند.

[^4]: Declarative
[^5]: Imperative

## مزایا
ایجاد زیرساخت در گذشته یک فرآیند دستی زمان‌بر و پرهزینه بوده است. اکنون مدیریت زیرساخت به دور از سخت‌افزارهای فیزیکی در مراکز داده، اگرچه این هنوز ممکن است یکی از اجزای سازمان شما باشد، به سمت مجازی‌سازی، کانتینرها و محاسبات ابری گرایش دارد.

با محاسبات ابری، تعداد اجزای زیرساخت رشد کرده است، بیشتر برنامه‌ها در روزانه به محصولات ارائه شده‌اند و زیرساخت باید قابلیت ایجاد، مقیاس‌پذیری و خاموش شدن در فواصل زمانی کوتاه را داشته باشد. بدون رعایت یک شیوه IaC، مدیریت مقیاس زیرساخت امروزی بسیار دشوارتر خواهد بود.

IaC می‌تواند به سازمان شما در مدیریت نیازهای زیرساخت فناوری اطلاعات کمک کند، همچنین سازگاری را بهبود بخشد و خطاها و پیکربندی دستی را کاهش دهد.

مزایا:

* کاهش هزینه
* افزایش سرعت پیاده‌سازی
* کاهش خطاها
* بهبود سازگاری زیرساخت
* حذف انحراف پیکربندی

## ابزارهای معروف
ابزارهای خودکارسازی سرور و مدیریت پیکربندی معمولاً می‌توانند برای دستیابی به IaC استفاده شوند. همچنین راه حل‌هایی به طور خاص برای IaC وجود دارند.

این چند گزینه محبوب هستند:

* Chef
* Puppet
* Red Hat Ansible Automation Platform
* Saltstack
* Terraform
* AWS CloudFormation
* Ansible Automation Platform می‌تواند برای پیکربندی سیستم‌های عامل و دستگاه‌های شبکه، پیاده‌سازی برنامه‌ها و مدیریت پیکربندی استفاده شود.

## IaC برای DevOps
IaC بخش مهمی از پیاده‌سازی روش‌های DevOps و یکپارچگی پیوسته/تحویل پیوسته (CI/CD) است. IaC بیشتر کارهای تأمین زیرساخت را از توسعه‌دهندگان سلب می‌کند، که می‌توانند با اجرای یک اسکریپت، زیرساخت خود را آماده کنند. در این روش، پیکربندی برنامه‌ها در انتظار زیرساخت نمی‌ماند و مدیران سیستم به فرایندهای دستی و زمان‌بر اشاره نمی‌کنند.

CI/CD بر اتوماسیون پیوسته و نظارت پیوسته در طول چرخه عمر برنامه، از ادغام و تست تا تحویل و پیاده‌سازی، تکیه دارد. برای اتوماسیون محیط، نیاز به یکپارچگی دارید. اتوماسیون پیاده‌سازی برنامه‌ها کار نمی‌کند زمانیکه تیم توسعه، برنامه‌ها را یا محیط‌ها را به یک شیوه پیاده‌سازی می‌کند و تیم عملیات به یک شیوه دیگر پیاده‌سازی می‌کند.

هماهنگ کردن تیم‌های توسعه و عملیات از طریق رویکرد DevOps، منجر به کاهش تعداد خطاها، پیاده‌سازی دستی و ناهماهنگی‌ها می‌شود. IaC به شما کمک می‌کند تا تیم‌های توسعه و عملیات را هماهنگ کنید، زیرا هر دو تیم می‌توانند از توصیفی مشابه برای پیاده‌سازی برنامه استفاده کنند که رویکرد DevOps را پشتیبانی می‌کند.

فرآیند پیاده‌سازی یکسان برای هر محیط، از جمله محیط تولید شما، باید استفاده شود. IaC هر بار که استفاده می‌شود، محیطی یکسان تولید می‌کند. IaC همچنین نیاز به تعمیر محیط‌های پیاده‌سازی فردی با پیکربندی‌های منحصر به فرد را کاهش داده و اطمینان می‌دهد که محیط تولید یکسان خواهد بود.

روش‌های بهتر DevOps نیز برای زیرساخت در IaC به کار می‌روند. زیرساخت می‌تواند از همان لوله CI/CD که یک برنامه در طول توسعه نرم‌افزار از آن استفاده می‌کند، عبور کند و کنترل نسخه‌ و تست یکسانی را برای کد زیرساخت اعمال کند.

## منبع
[What is infrastructure as code (IaC)?](https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code)